(function(t){function e(e){for(var r,s,o=e[0],c=e[1],l=e[2],h=0,u=[];h<o.length;h++)s=o[h],n[s]&&u.push(n[s][0]),n[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);f&&f(e);while(u.length)u.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],r=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},n={app:0},a=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue-d3-example/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var f=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var r=i("64a9"),n=i.n(r);n.a},1742:function(t,e,i){},"4a3b":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var r=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("h1",[t._v("The Seasonality of Box Office Hits")]),t._m(0),i("div",{staticClass:"area-container"},[t._m(1),i("AreaChart",t._b({},"AreaChart",{movies:t.movies,filtered:t.filtered},!1))],1),t._l(t.histograms,function(e){var r=e.id,n=e.label,a=e.format;return i("div",{staticClass:"histograms"},[i("Histogram",t._b({},"Histogram",{movies:t.movies,filtered:t.filtered,id:r,format:a,updateFilters:t.updateFilters},!1)),i("div",[i("strong",[t._v(t._s(n))])])],1)})],2)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"description"},[t._v("\nIn the last decade, most block buster hits have happened around or during the summer and winter holidays.\n"),i("strong",[t._v("Brush")]),t._v(" the histograms to filter the movies by metascore and/or box office figures, and "),i("strong",[t._v("hover")]),t._v(" the movies to see more details.\n    ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"area-title"},[i("strong",[t._v("$ over/under median box office")])])}],s=(i("f751"),i("2ef0")),o=i.n(s),c=i("5698"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"areachart",attrs:{width:t.width,height:t.height}},[i("transition-group",{attrs:{tag:"g",css:!1},on:{enter:t.enter,leave:t.leave}},t._l(t.arcs,function(t){return i("path",{key:t.id,attrs:{d:t.path,fill:t.fill,stroke:"#fff"}})})),i("g",{ref:"xAxis",attrs:{transform:"translate(0, "+t.y0+")"}}),i("g",{ref:"yAxis",attrs:{transform:"translate("+t.margin.left+", 0)"}})],1)},f=[],h=i("3835"),u=i("cffa"),d=1e3,m=300,v={top:0,right:0,bottom:20,left:60},g={name:"areachart",props:["movies","filtered"],data:function(){return{width:d,height:m,margin:v,arcs:[],medianBox:0,y0:0}},created:function(){this.xScale=c["o"]().range([v.left,d-v.right]),this.yScale=c["m"]().range([m-v.bottom,v.top]),this.colorScale=c["n"](c["j"]),this.areaGen=c["a"]().curve(c["e"]),this.xAxis=c["b"]().scale(this.xScale).tickFormat(this.format),this.yAxis=c["c"]().scale(this.yScale).tickSizeOuter(0).tickFormat(function(t){return"".concat(c["h"]("$")(parseInt(t/1e6)),"M")})},watch:{movies:function(){this.calculateScales(),c["p"](this.$refs.xAxis).call(this.xAxis),c["p"](this.$refs.yAxis).call(this.yAxis).select(".domain").remove()},filtered:function(){this.calculateData()}},methods:{calculateScales:function(){var t=this;if(this.movies.length){this.medianBox=c["l"](this.movies,function(t){return t.boxOffice});var e=c["g"](this.movies,function(t){return t.score});this.colorScale.domain(e).nice();var i=c["g"](this.movies,function(t){return t.date}),r=Object(h["a"])(i,2),n=r[0],a=r[1];this.xScale.domain([c["q"].offset(n,-2),c["q"].offset(a,2)]);var s=c["g"](this.movies,function(e){return e.boxOffice-t.medianBox});this.yScale.domain(s),this.y0=this.yScale(0),this.areaGen.y0(this.y0)}},calculateData:function(){var t=this;this.filtered.length&&(this.arcs=o.a.chain(this.filtered).sortBy(function(e){return-Math.abs(e.boxOffice-t.medianBox)}).map(function(e){return{id:e.id,path:t.areaGen([[t.xScale(c["q"].offset(e.date,-2)),t.y0],[t.xScale(e.date),t.yScale(e.boxOffice-t.medianBox)],[t.xScale(c["q"].offset(e.date,2)),t.y0]]),fill:t.colorScale(e.score),data:e}}).value())},enter:function(t,e){u["a"].fromTo(t,.25,{scaleY:0,svgOrigin:"0 ".concat(this.y0)},{scaleY:1,onComplete:e})},leave:function(t,e){u["a"].fromTo(t,.25,{scaleY:1},{scaleY:0,svgOrigin:"0 ".concat(this.y0),onComplete:e})}}},p=g,b=(i("fd09"),i("2877")),x=Object(b["a"])(p,l,f,!1,null,null,null);x.options.__file="AreaChart.vue";var y=x.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"histogram",attrs:{width:t.width,height:t.height}},[i("g",{staticClass:"bars"},t._l(t.bars,function(t){return i("rect",{key:t.id,attrs:{x:t.x,width:t.width,y:t.y,height:t.height,fill:t.fill,stroke:t.fill}})})),i("g",{ref:"xAxis",attrs:{transform:"translate(0, "+(t.height-t.margin.bottom)+")"}}),i("g",{ref:"brush"})])},_=[],O=i("ade3"),w=500,j=120,A={top:20,right:20,bottom:20,left:20},k={name:"histogram",props:["movies","filtered","id","format","updateFilters"],data:function(){return{width:w,height:j,margin:A,bars:[]}},created:function(){this.xScale=c["m"]().range([A.left,w-A.right]),this.histogram=c["i"](),this.yScale=c["m"]().range([j-A.bottom,A.top]),this.colorScale=c["n"](c["j"]),this.xAxis=c["b"]().scale(this.xScale).tickFormat(this.format),this.brush=c["d"]().extent([[A.left,A.top],[w-A.right,j-A.bottom]]).on("brush",this.brushEnd).on("end",this.brushEnd)},mounted:function(){c["p"](this.$refs.brush).call(this.brush)},watch:{movies:function(){this.calculateScales(),c["p"](this.$refs.xAxis).call(this.xAxis)},filtered:function(){this.calculateData()}},methods:{calculateScales:function(){var t=this;if(this.movies.length){var e=c["g"](this.movies,function(t){return t.score});this.colorScale.domain(e).nice();var i=c["g"](this.movies,function(e){return e[t.id]});this.xScale.domain(i).nice(),this.histogram.domain(this.xScale.domain()).thresholds(this.xScale.ticks(50)).value(function(e){return e[t.id]});var r=this.histogram(this.movies),n=c["k"](r,function(t){return t.length});this.yScale.domain([0,n])}},calculateData:function(){var t=this;if(this.filtered.length){var e=this.histogram(this.filtered);this.bars=e.map(function(e,i){var r=e.x0,n=e.x1,a=t.xScale(r),s=t.bars[i]?t.bars[i].toY:t.yScale(0),o=t.yScale(e.length),l=t.colorScale(c["l"](e,function(t){return t.score})||0);return{id:i,x:a,width:t.xScale(n)-a,y:s,toY:o,height:j-A.bottom-s,toHeight:j-A.bottom-o,fill:l}});u["b"].staggerFromTo(this.bars,.25,{cycle:{y:function(e){return t.bars[e].y},height:function(e){return t.bars[e].height}}},{cycle:{y:function(e){return t.bars[e].toY},height:function(e){return t.bars[e].toHeight}}})}},brushEnd:function(){var t=null;if(c["f"].selection){var e=Object(h["a"])(c["f"].selection,2),i=e[0],r=e[1];t=[this.xScale.invert(i),this.xScale.invert(r)]}this.updateFilters(Object(O["a"])({},this.id,t))}}},C=k,$=(i("9bf5"),Object(b["a"])(C,S,_,!1,null,"0ccb2756",null));$.options.__file="Histogram.vue";var F=$.exports,B=2008,E={name:"app",components:{Histogram:F,AreaChart:y},data:function(){return{histograms:[{id:"score",label:"metascores"},{id:"boxOffice",label:"box office figures",format:function(t){return"$".concat(parseInt(t/1e6),"M")}}],movies:[],filters:{},filtered:[]}},mounted:function(){var t=this;fetch("./movies.json").then(function(t){return t.json()}).then(function(e){t.movies=o.a.chain(e).map(function(t,e){return Object.assign(t,{id:e,date:new Date(t.date)})}).filter(function(t){return t.boxOffice&&t.year>=B}).value(),t.filtered=t.movies})},methods:{updateFilters:function(t){var e=this;this.filters=Object.assign(this.filters,t),this.filtered=o.a.filter(this.movies,function(t){return o.a.every(e.filters,function(e,i){return!e||e[0]<t[i]&&t[i]<e[1]})})}}},H=E,M=(i("034f"),Object(b["a"])(H,n,a,!1,null,null,null));M.options.__file="App.vue";var T=M.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(T)}}).$mount("#app")},"64a9":function(t,e,i){},"9bf5":function(t,e,i){"use strict";var r=i("4a3b"),n=i.n(r);n.a},fd09:function(t,e,i){"use strict";var r=i("1742"),n=i.n(r);n.a}});
//# sourceMappingURL=app.8122d607.js.map